{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst feedbackForm = document.querySelector('.feedback-form');\n\n(function restoreDataFromLS() {\n  const savedFormData = JSON.parse(localStorage.getItem('feedback-form-state'));\n  if (savedFormData) {\n    [...feedbackForm.elements].forEach(el => {\n      el.value = savedFormData[el.name] ?? '';\n    });\n  }\n})();\n\nfeedbackForm.addEventListener('submit', handlerFormSubmit);\n\nfeedbackForm.addEventListener('input', throttle(handlerInputFormData, 500));\n\nfunction handlerInputFormData({ target }) {\n  const currentFormData =\n    JSON.parse(localStorage.getItem('feedback-form-state')) ?? {};\n  currentFormData[target.name] = target.value;\n  localStorage.setItem('feedback-form-state', JSON.stringify(currentFormData));\n}\n\nfunction handlerFormSubmit(ev) {\n  ev.preventDefault();\n  const curFormData = {};\n  [...ev.currentTarget.elements].forEach(el => {\n    if (el.nodeName === 'INPUT' || el.nodeName === 'TEXTAREA') {\n      curFormData[el.name] = el.value;\n    }\n  });\n  ev.currentTarget.reset();\n  localStorage.removeItem('feedback-form-state');\n  console.log(curFormData);\n}\n"],"names":["feedbackForm","savedFormData","el","handlerFormSubmit","throttle","handlerInputFormData","target","currentFormData","ev","curFormData"],"mappings":"wIAEA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,GAE3D,UAA6B,CAC5B,MAAMC,EAAgB,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,EACxEA,GACF,CAAC,GAAGD,EAAa,QAAQ,EAAE,QAAQE,GAAM,CACvCA,EAAG,MAAQD,EAAcC,EAAG,OAAS,EAC3C,CAAK,CAEL,KAEAF,EAAa,iBAAiB,SAAUG,CAAiB,EAEzDH,EAAa,iBAAiB,QAASI,EAASC,EAAsB,GAAG,CAAC,EAE1E,SAASA,EAAqB,CAAE,OAAAC,GAAU,CACxC,MAAMC,EACJ,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,GAAK,GAC7DA,EAAgBD,EAAO,MAAQA,EAAO,MACtC,aAAa,QAAQ,sBAAuB,KAAK,UAAUC,CAAe,CAAC,CAC7E,CAEA,SAASJ,EAAkBK,EAAI,CAC7BA,EAAG,eAAc,EACjB,MAAMC,EAAc,CAAA,EACpB,CAAC,GAAGD,EAAG,cAAc,QAAQ,EAAE,QAAQN,GAAM,EACvCA,EAAG,WAAa,SAAWA,EAAG,WAAa,cAC7CO,EAAYP,EAAG,MAAQA,EAAG,MAEhC,CAAG,EACDM,EAAG,cAAc,QACjB,aAAa,WAAW,qBAAqB,EAC7C,QAAQ,IAAIC,CAAW,CACzB"}